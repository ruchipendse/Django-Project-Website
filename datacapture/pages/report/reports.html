{% extends 'base.html' %}
{% block content_2 %}
    {% if not user.is_authenticated %}
        <script>
            window.location.href = "/";
        </script>
    {% endif %}
    
    <h1>Electral Control Systems</h1>
    <h2>Reports: IN PROGRESS</h2>

    <div class = "reports"> 
        <form name = "reportsForm" action = "generateReport" method = "POST">
            {% csrf_token %} 
            <input type = "hidden" id = "selectedCriteria" name = "selectedCriteria" value = "USER"/>
            <div id = 'date_div' align = 'left'>
                <table>
                    <tr>
                        <td><label id="label_from_date" for = "from_date" disabled>From</label></td>
                        <td><input type = "date" name = "from_date" id = "from_date"></td>
                        <td><label id="label_to_date" for = "to_date" disabled>To</label></td>
                        <td><input type = "date" name = "to_date" id = "to_date"></td>
                        <td><label id="label_criteria" for = "criteria" disabled>Criteria</label></td>
                        <td>
                            <select name = "criteria" id = "criteria">
                                <option>User</option>
                                <option>Part</option>
                                <option>Machine</option>
                            </select>
                        </td>
                        <td>
                            <input type="submit" id = "generateReport" class="w3-button w3-blue" value=" Generate Report"
                                    onclick = "setFunctionMode('GENERATE')">
                        </td>
                    </tr>
                </table>
            </div>
                <table id = "reporttable"  width = 95%>
                <tr>
                    <td>Userwise all entries</td>
                </tr>
                <tr>
                    <td>Machinewise all entries</td>
                </tr>
                <tr>
                    <td>Partwise all entries</td>
                </tr>
            </table>
            <!-- <div id = "buttondiv" align = "right">
                <input type = "hidden" id = "selectedSetup" name = "selectedSetup" value = "NO_SETUP"/>
                <input type = "hidden" id = "functionMode" name = "functionMode" value = "ADD"/>
                <table>
                    <tr>
                        <td>
                            <input type="submit" id = "addSetupButton" class="w3-button w3-blue" value=" New "
                                    onclick = "setFunctionMode('ADD')">
                        </td>
                        <td>
                            <input type="submit" id = "editSetupButton" class="w3-button w3-blue" value="Edit"
                                    onclick = "setFunctionMode('EDIT')">
                        </td>
                        <td>
                            <input type="submit" id = "deleteSetupButton" class="w3-button w3-blue" value="Delete"
                                    onclick = "setFunctionMode('DELETE')">
                        </td>
                    </tr>
                </table>
            </div> -->
        </form>
    </div>

<script>

    function setFunctionMode(fMode){
        document.getElementById('functionMode').value =  fMode;
    }

    function setupSelected(st){
        document.getElementById('editSetupButton').classList.remove('disabled');
        document.getElementById('deleteSetupButton').classList.remove('disabled');
        document.forms["setupsForm"]['selectedSetup'].value = st;

        var setupsListJson = document.getElementById('setupsListJsondata').getAttribute("data");
        var setupsList = JSON.parse(setupsListJson);

        document.getElementById('scode').setAttribute('value', setupsList[st]['id_code'])
        document.getElementById('sname').setAttribute('value', setupsList[st]['name'])
        document.getElementById('sdesc').setAttribute('value', setupsList[st]['desc'])
    }

    /**
        THIS METHOD INITAITES THE STATUS OF REQUIRED FIELDS ON USERS PAGE 
    */
    function init(){
        document.getElementById('editSetupButton').classList.add('disabled');
        document.getElementById('deleteSetupButton').classList.add('disabled');
    }

    init();
</script>
{% endblock %}
